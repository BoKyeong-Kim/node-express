# node-express
*Web Development with Node & Express*


### 03-helloworld.js

- fs.readFile이 지정한 파일의 콘텐츠를 읽고, 다 읽은 다음에 콜백함수 실행
    - 만약 파일이 존재하지 않거나 권한 문제 때문에 파일을 읽을 수 없다면 err 변수가 만들어지고 함수는 서버 오류를 나타내는 HTTP 상태코드 500울 반환
    - 파일을 성공적으로 읽었으면 콜백 함수에 전달된 응답 코드와 콘텐츠 타입과 함께 파일을 클라이언트에 전송

*ch02 - 노드만 사용하여 간단한 웹서버 생성*
*ch03 - 익스프레스를 사용하여 ch02에서 만들었던 서버 재생성*


<br>

### 00-meadowlark.js
- meadowlark.js 파일 생성 → 프로젝트의 진입점



### 01-meadowlark.js
app.get - 라우트를 추가하는 메서드 → 경로와 함께 두가지 매개변수를 받음
- **경로**는 라우트 (/about, /about/, /About, /about?foo=bar 모두 똑같이 동작)
- **함수**는 라우트가 일치할 때 호출하는 함수 → 요청과 응답객체가 매개변수로 전달


app.use - 미들웨어와 관련있는 메서드
- 라우트가 일치하지 않을 때 사용할 일종의 폴백 핸들러
- **익스프레스에서는 라우트와 미들웨어의 순서가 중요**
    - 만약 404 핸들러를 라우트보다 먼저 작성했다면, 홈페이지와 어바웃 페이지는 동작하지 않고 무조건 404페이지로 연결


앞서 req.url을 정규화 했던 부분
- 요청을 정확히 파악하기 위해 쿼리스트링과 마지막 슬래시를 없애고, 소문자로 변환하는 일을 직접했어야함
- 익스프레스의 라우트는 이런 작업을 자동으로 대신한다.



### 02-meadowlark.js

### 뷰와 레이아웃

- 뷰 : 사용자가 보는것을 책임지는 부분
    - 이미지나 CSS 파일같은 정적 자원과는 다름 → HTML역시 각 요청에 따라 즉석에서 변할 수 있음
- 익스프레스에서는 여러가지 뷰 엔진을 지원하며 이들의 추상화 레벨 역시 다양
    - 퍼그
    - 핸들바 → 퍼그에 비해 추상화가 좀 덜한 편

### 핸들바

- HTML은 그대로 작성하고, 여기에 특별한 태그를 사용하면 핸들바가 그 태그에 콘텐츠를 삽입하는 방식으로 동작
- `npm install express-handlebars@3`

```jsx
const expressHandlebars = require('express-handlebars')

// 핸들바 뷰 엔진 설정
app.engine('handlebars', expressHandlebars({
    defaultLayout : 'main',
}))

app.set('view engine', 'handlebars')
```

- 뷰 엔진을 생성하고 익스프레스에서 이 엔진을 기본 값으로 사용
- 레이아웃을 사용하여 사이트에 존재하는 모든 페이지에 프레임 워크를 제공

